<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>


    <!-- CDN de Chart.js versión 2.5.0 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <!-- CDN de Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- CDN de GOOGLE -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <link rel="stylesheet" href="./styles.css" />
</head>

<body>


    <header>
        <h2 class="produto__user"></h2>
    </header>




    <main class="producto">
        <h1 class="producto__subtittle">VISTA GENERAL DE PRODUCCIONES</h1>
        <!-- contenedor 1 -->
        <div class="producto__container-row">

            <!-- modulo 1 -->
            <div class="producto__subcontainer">

                <h2 class="producto__subtittle">LISTA DE CULTIVOS</h2>

                <div style=" width: 100%; height: 100%;" id="chart_lista_cultivos"></div>

            </div>


            <!-- modulo 2 -->
            <div class="producto__subcontainer">
                <h2 class="producto__subtittle">MAPA</h2>
                <div class="producto__map-img">
                    <img class="producto__img-gps" src="../public/img_/main/sedelembo.png" alt="">
                </div>
            </div>

            <!-- modulo 3 -->
            <div class="producto__subcontainer">

                <h2 class="producto__subtittle">LISTA DE INSUMOS</h2>
                <div id="chart_lista_insumos" style="width: 100%; height: 100%;"></div>

            </div>
            

            <!-- modulo 4 -->
            <div class="producto__subcontainer">
                <h2 class="producto__subtittle">NOTIFICACIONES</h2>
                <table class="producto__tabla">
                    <thead>
                        <tr class="producto__tabla-header">
                            <th class="producto__cell">Id_Cultivo</th>
                            <th class="producto__cell">Id_Usuario</th>
                            <th class="producto__cell">Novedad</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="producto__tabla-data">
                            <td class="producto__cell">767</td>
                            <td class="producto__cell">Pablo_A</td>
                            <td class="producto__cell-lg">Nota</td>
                        </tr>
                    </tbody>
                </table>

            </div>

        </div>





        <!-- ************ -->
        <!-- contenedor 2 -->
        <h2 class="producto__subtittle">FINANZAS</h2>

        <div class="producto__container-row">


            <!-- modulo 2.1 -->
            <div class="producto__subcontainer">
                <h2 class="producto__subtittle">COSTO X CULTIVOS</h2>
                <canvas id="Costo_General_Cultivos" style="width: 50%; height: 300px;"></canvas>
            </div>


            

            <div class="producto__subcontainer">
                <h2 class="producto__subtittle">CALCURALDORA DE INVERSION</h2>
                <table class="producto__tabla">
                    <thead>
                        <tr class="producto__tabla-header">
                            <th class="producto__cell">Id_Cultivo</th>
                            <th class="producto__cell">Nombre</th>
                            <th class="producto__cell">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="producto__tabla-data">
                            <td class="producto__cell">001</td>
                            <td class="producto__cell">Papa</td>
                            <td class="producto__cell-lg">VALUE GRAFICO</td>
                        </tr>
                    </tbody>
                </table>
            </div>




            <!-- modulo 2.1 -->
            <div class="producto__subcontainer">
                <h2 class="producto__subtittle">SENSORES 24/7</h2>




                
            </div>

        











        </div>

     

    </main>

    <script>
        // Fix 1: Renamed draw functions to avoid conflicts and proper rendering.
        google.charts.load('current', { 'packages': ['corechart'] });

        // Chart 1 - Cultivos
        google.charts.setOnLoadCallback(drawCultivosChart);
        function drawCultivosChart() {
            const data = google.visualization.arrayToDataTable([
                ['Semilla', 'Cantidad'],
                ['Papa', 1],
                ['Maiz', 1],
                ['Platano', 1],
                ['Trigo', 1],
                ['Soya', 1],
                ['Avena', 1],
                ['Cebada', 1],
                ['Tomate', 1],
                ['Toronja', 1],
                ['Aguacate', 1],
                ['Cafe', 1],
                ['Yuca', 1]
            ]);

            const options = {
                title: 'LISTADO GENREAL CULTIVOS',
                titleTextStyle: { color: 'white' },
                backgroundColor: 'transparent',
                hAxis: { textStyle: { color: 'white' } },
                vAxis: { textStyle: { color: 'white' } },
                legend: { position: 'none' },
                chartArea: { left: 50, top: 20, width: '100%', height: '80%' }
            };

            const chart = new google.visualization.BarChart(document.getElementById('chart_lista_cultivos'));
            chart.draw(data, options);
        }

        // Chart 2 - Insumos
        google.charts.setOnLoadCallback(drawInsumosChart);
        function drawInsumosChart() {
            const data = google.visualization.arrayToDataTable([
                ['Semilla', 'Cantidad'],
                ['Papa', 45],
                ['Maiz', 62],
                ['Platano', 118],
                ['Trigo', 94],
                ['Soya', 77],
                ['Avena', 39],
                ['Cebada', 155],
                ['Tomate', 83],
                ['Toronja', 66],
                ['Aguacate', 66],
                ['Cafe', 66],
                ['Yuca', 66]
            ]);

            const options = {
                title: 'LISTADO GENREAL INSUMOS',
                titleTextStyle: { color: 'white' },
                backgroundColor: 'transparent',
                hAxis: { textStyle: { color: 'white' } },
                vAxis: { textStyle: { color: 'white' } },
                legend: { position: 'none' },
                chartArea: { left: 50, top: 20, width: '100%', height: '80%' }
            };

            const chart = new google.visualization.BarChart(document.getElementById('chart_lista_insumos'));
            chart.draw(data, options);
        }

        // Chart 3 - Finanzas

        new Chart("chart_finanzas_uno", {
            type: "line",
            data: {
                labels: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
                datasets: [
                    {
                        label: "Inventario x inversión",
                        data: [18, 12, 14, 11, 14, 15, 16, 17, 17, 17, 18, 22],
                        backgroundColor: ["red"]
                    }
                ]
            },
            options: {
                plugins: {
                    title: {
                        display: true,
                        text: "GANANCIAS X PRODUCCIÓN"
                    }
                },
                scales: {
                    x: { grid: { color: "lightblue", lineWidth: 2 } },
                    y: { grid: { color: "lightgreen", lineWidth: 2 } }
                }
            }
        });
    </script>


    <script>
        // Chart 4 - Cultivos X Costo $$$$

        // Setup - Definimos manualmente las etiquetas y colores
        const labels = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
        const datasets = [
            {
                label: 'Dataset 1',
                data: [154380, 402340, 1756000, 129890, 300000, 785390, 2520000],
                borderColor: 'red',
                backgroundColor: 'rgba(255, 0, 0, 0.2)',
            },
            {
                label: 'Dataset 2',
                data: [342560, 654200, 898430, 543400, 1200000, 705410, 4340000],
                borderColor: 'blue',
                backgroundColor: 'rgba(0, 0, 255, 0.2)',
            },
            {
                label: 'Dataset 3',
                data: [342560, 654200, 898430, 543400, 1200000, 705410, 4340000],
                borderColor: 'blue',
                backgroundColor: 'rgba(0, 100, 255, 0.2)',
            },
            {
                label: 'Dataset 4',
                data: [400000, 150000, 730000, 985500, 2400000, 305000, 4675000],
                borderColor: 'green',
                backgroundColor: 'rgba(0, 255, 0, 0.2)',
            }
        ];

        // Calculamos los valores totales
        const totalData = labels.map((_, index) => {
            return datasets.reduce((sum, dataset) => sum + dataset.data[index], 0);
        });

        datasets.push({
            label: 'Dataset Total',
            data: totalData,
            borderColor: 'purple',
            backgroundColor: 'rgba(128, 0, 128, 0.2)',
        });

        const data = {
            labels: labels,
            datasets: datasets,
        };

        // Configuración del gráfico
        const config = {
            type: 'line',
            data: data,
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Valores Totales Calculados Automáticamente',
                    },
                },
                scales: {
                    y: {
                        suggestedMin: 0,
                        suggestedMax: Math.max(...totalData) + 100000, // Ajustamos el límite máximo dinámicamente
                    },
                },
            },
        };

        // Inicialización del gráfico
        window.addEventListener('DOMContentLoaded', () => {
            const ctx = document.getElementById('Costo_General_Cultivos').getContext('2d');
            new Chart(ctx, config);
        });
    </script>

</body>

</html>